<!DOCTYPE html>
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="tutorial.css">
<script type="text/javascript" src="highslide/highslide.js"></script>
<link rel="stylesheet" type="text/css" href="highslide/highslide.css" />
<script type="text/javascript">
hs.graphicsDir = 'highslide/graphics/';
hs.wrapperClassName = 'wide-border';
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<body>


      



<h1 id="Name">-name</h1>
<p><img src="http://www.particularart.com/static/media/uploads/command_reference/name/hello_01.png" title="Greetings from G'MICKY" style="margin: 3px; border: 0px solid #808080; float: left;" width="300" height="300" /></p>
<p><tt><b>-name</b></tt> labels selections for reference during execution of <tt><b>gmic</b></tt> scripts and for managing layer properties of host applications like Gimp or Krita. Naming conventions differ between these two contexts. See The <a target="_parent" href="#HostApplicationUseCase" class="internal">Host Application Use Case</a> for how <tt><b>-name</b></tt> interacts with host applications which support image layers.</p>
<p>Since this command is frequently used to label selections containing one image, it is easy to misconstrue its purpose to one of just labeling images. As misconstructions go, this is mostly harmless; its malfeasance lies mainly with the mental blocks erected in the minds of gmic script writers who forget the benefits of classifying related images under one meaningful name.</p>
<p>The format of the command is:</p>
<p><tt><b>-name[</b></tt><i>&lt;selection&gt;</i><tt><b>] &ldquo;</b></tt><i>&lt;name&gt;</i><tt><b>&rdquo;</b></tt></p>
<p>The command associates the collection of images referenced by <i>&lt;selection&gt;</i> with the label <i>&lt;name&gt;</i>. The images become members of a<i> named selection</i> that<i> &lt;name&gt;</i> identifies. Its shortcut is <tt><b>-nm</b></tt>,<i><br /></i></p>
<p>Formally, the label <i>&lt;name&gt;</i> may be written with any characters supported by the host computer, but if the intent is to use labels as named selections in <a target="_parent" href="command-decorations.shtml#image_selection" class="internal">command decorators</a> or image parameters, contexts where <strong><tt>[</tt></strong> and <strong><tt>]</tt></strong> selection operators apply, then <strong><tt>gmic</tt></strong> further restricts character usage to the class <tt><b>[a-zA-Z0-9_]</b></tt> and such names cannot begin with a numeric.</p>
<p><tt><b>gmic</b></tt> scripts operating within the context of the host application plug-in may use <tt><b>-name</b></tt> to communicate with the host for setting layer properties, including setting the layer's name in the host application. This host layer name is not the same as the label that <tt><b>-name</b></tt> sets; In fact, the <tt><b>gmic</b></tt> script writer uses -name label the image according to a simple syntax that resembles calling functions. The host application retrieves this gmic label and executes internal functions to set position, layer modes, opacity and the host application layer name, usually quite different than the gmic label.</p>
<p>Usage of -name with selection operators <strong><tt>[</tt></strong> and <strong><tt>]</tt></strong></p>
<table class="table_striped" rules="all" style="border-color: #808080; border-width: 1px; border-style: solid;" border="1">
<tbody>
<tr>
<td width="65%">
<pre>gmic                                   \
   -sample rose                        \
   -name[0] BlurMe                     \
   -blur[BlurMe] 4                     \
   -output[BlurMe] rose.png
</pre>
</td>
<td width="35%"><img src="http://www.particularart.com/static/media/uploads/command_reference/name/rose_02.png" title="Blurred Rose" class="img_block" style="vertical-align: middle; border: 0px solid #808080;" width="300" height="250" /></td>
</tr>
</tbody>
</table>
<p>The sample image, rose, becomes an image in the named selection <tt><b>BlurMe</b></tt>. At some subsequent point in the pipeline, all members of the <tt><b>BlurMe</b></tt> named selection are selected for blurring. It so happens that there is only one member of the named selection which is affected by this operation.</p>
<h2 id="PositionTracking">Position Tracking</h2>
<p>Once an image is a member of a named selection it retains its association even though it changes its position on the image list.</p>
<table class="table_striped" rules="all" style="border-color: #808080; border-width: 1px; border-style: solid;" border="1">
<tbody>
<tr>
<td width="65%">
<pre>gmic                                   \
   -sample rose                        \
   -name[0] BlurMe                     \
   -input[0] [-1],[-1],[-1],[-1],255*u \
   -blur[BlurMe] 4                     \
   -output[BlurMe] rose.png
</pre>
</td>
<td width="35%"><img src="http://www.particularart.com/static/media/uploads/command_reference/name/rose_02.png" title="Blurred Rose" class="img_block" style="vertical-align: middle; border: 0px solid #808080;" width="300" height="250" /></td>
</tr>
<tr>
<td colspan="2" width="100%">
<pre>[gmic]-0./ Start G'MIC interpreter. 
[gmic]-1./ Input sample image 'rose' (1 image 600x500x1x3).
[gmic]-1./ Set name of image [0] to 'BlurMe'.
[gmic]-1./ Input image at position 0, with values '255*u' (1 image 600x500x1x3).
[gmic]-2./ Blur image [1] with standard deviation...<i>&lt;omitted for brevity&gt;</i>
[gmic]-2./ Output image [1] as png file 'rose.png' (1 image 600x500x1x3)
[gmic]-2./ End G'MIC interpreter
</pre>
</td>
</tr>
</tbody>
</table>
<p>With the insertion of a new image specifically at the beginning of the image list, the rose image assumes a new list index of &lsquo;1.&rsquo; This does not remove the rose image from the <tt><b>BlurMe</b></tt> named selection, however, even though the former index of &lsquo;0&rsquo; was the basis for its inclusion in the named selection. Observe from <tt><b>gmic&rsquo;s</b></tt> progress report that the rose image, though re-indexed with &lsquo;1&rsquo;, is still selected for blurring. It continues&nbsp; being a member of <tt><b>BlurMe</b></tt>; it is subsequently output on the basis of that membership; <tt><b>gmic</b></tt> keeps track of the movements of the <tt><b>BlurMe</b></tt> membership. In light of this, the script writer mostly does not have to worry about where the image is on the list.</p>
<h2 id="OneAssociationataTime">One Association at a Time</h2>
<p>An image cannot be associated with more than one named selection at a time. If an image is subsequently enrolled in a different named selection, it loses its association with all previous named selections.</p>
<table class="table_striped" rules="all" style="border-color: #808080; border-width: 1px; border-style: solid;" border="1">
<tbody>
<tr>
<td width="65%">
<pre>gmic                                   \
   -sample rose                        \
   -name[0] BlurMe                     \
   -input[0] [-1],[-1],[-1],[-1],255*u \
   -name[0-&ndash;1] Granfalloon             \
   -blur[BlurMe] 4                     \
   -output[BlurMe] rose.png
</pre>
</td>
<td width="35%"><img src="http://www.particularart.com/static/media/uploads/command_reference/name/black_03.png" alt="Fade to Black" title="Fade to Black" class="img_block" style="margin: 3px; border: 0px solid #808080;" width="300" height="250" /></td>
</tr>
<tr>
<td colspan="2" width="100%">
<pre>[gmic]-0./ Start G'MIC interpreter
[gmic]-1./ Input sample image 'rose' (1 image 600x500x1x3)
[gmic]-1./ Set name of image [0] to 'BlurMe'
[gmic]-1./ Input image at position 0, with values '255*u' (1 image 600x500x1x3).
[gmic]-2./ Set name of images [0,1] to 'Granfalloon'
[gmic]./ <span style="color: #d02010;">*** Error *** Command '-blur': Invalid selection [BlurMe] (undefined label 'BlurMe')</span>.
</pre>
</td>
</tr>
</tbody>
</table>
<p>With the inclusion of all images on the list within the named selection <tt><b>Granfalloon</b></tt>, the rose image is no longer a part of <tt><b>BlurMe</b></tt>. Since the rose image is the only member of that named selection, the selection ceased to exist and subsequent references to it raised an exception. Had there been other members of <tt><b>BlurMe</b></tt>, the named selection would have persisted, the error would not have been raised but the rose image would not have been blurred or saved, either.</p>
<h2 id="ExampleMultipleImageTracking">Example: Multiple Image Tracking</h2>
<p>The following example illustrates the inclusion of a multiple number of images within single image selections. Without named selections, this example would have been both harder to code and harder to read. In addition to index bookkeeping, named selections let the <tt><b>gmic</b></tt> script writer signal intent through an apt choice of selection names.</p>
<pre>gmic                                                                   \
   -input '(127,215,130,90,215^129,64,210,125,180^131,90,37,220,63)'        \
   -input ampersand.cimg                                                    \
   [-1]x12                                                                  \
   -name[1--1:4] Red                                                        \
   -name[2--1:4] Green                                                      \
   -name[3--1:4] Blue                                                       \
   -name[4--1:4] Yellow                                                     \
   -name[0] Colormap                                                        \
   -local[Colormap,Red] -map[Red] [Colormap] -endlocal                      \
   -local[Colormap,Blue] -mul[Blue] 3 -map[Blue] [Colormap] -endlocal       \
   -local[Colormap,Green] -mul[Green] 2 -map[Green] [Colormap] -endlocal    \
   -local[Colormap,Yellow] -mul[Yellow] 4 -map[Yellow] [Colormap] -endlocal \
   -remove[Colormap]                                                        \
   -append x                                                                \
   -output. ampersand.png
</pre>
<p>ampersand.png:</p>
<p><img src="http://www.particularart.com/static/media/uploads/command_reference/name/ampersand_04.png" alt="Ampersand Row" class="img_block" style="margin: 3px; border: 0px solid #808080;" width="675" height="52" /></p>
<p>The template, <tt><b>ampersand.cimg</b></tt>, is a single channel binary mask with each pel being set to either 0 (background) or 1(foreground). We multiplexed the mask twelve times, leaving thirteen ampersands on the image list, and grouped these into separate selections using the modulo-n (:&lt;<i>n</i>&gt;) selection notation. See <a target="_parent" href="http://gmic.eu/reference.shtml#section6" title="Selections" class="external"><em>1.5 Command Items</em></a> in the <a target="_parent" href="http://gmic.eu/gmic_reference.pdf" title="G'MIC Handbook" class="external"><i>G&rsquo;MIC Handbook</i></a> or <a target="_parent" href="command-decorations.shtml" title="Command Decorations" class="internal"><i>Command Decorations</i></a> at this site for this and other selection notation tricks. The <a target="_parent" href="_input.shtml" title="The -input command" class="internal"><tt><b>-input</b></tt></a> command starting off the script introduces a three channel color map with four swatches, written as an <a target="_parent" href="_input.shtml#ImageSpecification" title="Image Specifications" class="internal"><i>image specification</i></a>, and organized for use with <a target="_parent" href="_map.shtml" title="Color mapping command." class="internal"><tt><b>-map</b></tt></a>. The game is to group these ampersand masks into named selections, one for each color, then pull the members of the various named selections into local image lists, scaling and mapping the masks to the color maps in each locale, scaling the foreground flag (&lsquo;1&rsquo;) into a colormap index. The background flag, (&lsquo;0&rsquo;) scales to itself and selects the background color from the map, which is in slot zero. Citing named selections instead of literal selections eases the complexity of setting up each local image list, the name clearly signaling the intent of the local list.</p>
<h2 id="HostApplicationUseCase">The Host Application Use Case</h2>



   
</body></html>